<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#536878" />
        
        <link rel="manifest" href="manifest.webmanifest">


    </head>

    <body>

        <h1>This is my page</h1>
        <div id="installButtonDiv">
            <button id="installButton">Install</button>
        </div>
        <script>
            if('serviceWorker' in navigator) {
                navigator.serviceWorker.register('sw.js');
            };
            let installButton = document.getElementById('installButton');
            installButton.onclick = doInstall;
            
            let defferredPrompt;
            
            window.addEventListener('beforeinstallprompt', (event) => {
              // Prevent Chrome <= 67 from automatically showing the prompt
              event.preventDefault();
              // Stash the event so it can be triggered later.
              defferredPrompt = event;
              // Update the install UI to notify the user app can be installed
              installButton.style.display = 'block';
            });
            
            function doInstall() {
                installButton.style.display = 'none';
                defferredPrompt.prompt();
                // Wait for the user to respond to the prompt
                defferredPrompt.userChoice.then((choice) => {
                  if (choice.outcome === 'accepted') {
                    console.log('User accepted the A2HS prompt');
                  } else {
                    console.log('User dismissed the A2HS prompt');
                  }
                  // Clear the saved prompt since it can't be used again
                  defferredPrompt = null;
                });                
            }
            
        </script>
    </body>

</html>
